# Spread Heads â€“ TestFlight 1.0.7

Release date: 2025-11-09

## ðŸš€ New Feature
- Friend League Invites: Invite friends directly from a league. Friends now see pending invites on the Friends screen and can Accept or Decline. Accepting auto-adds them to the league.

## âœ… Improvements & Fixes
- Reliable League Join: Joining by code or deep link now performs a server lookup fallback and correctly adds membership on the backend.
- Signup Flow Unblocked: Removed email-verification gating so new users can enter immediately. Added a resend verification button (optional) and clearer error messaging.
- Username Pre-Check: Instant feedback if a username is already taken before submitting.
- Diagnostics Panel: Hidden debug toggle now surfaces detailed signup error info (with stored last error + debug code) to speed up tester feedback.

## ðŸ§ª What to Test
1. Create a league and invite a friend; have them accept from the Friends screen and confirm immediate league access.
2. Join an existing league by:
   - Entering its code manually (case-insensitive)
   - Opening a myfirstapp:// deep link (ensure it navigates into the correct league)
3. Create a brand new account (no verification email needed) and set a unique username; try a duplicate username to confirm the pre-check blocks it.
4. Trigger a controlled signup error (e.g., weak password) and verify the diagnostic message is clear.
5. Accept / decline multiple pending invites and ensure the list refreshes properly.

## ðŸ›  Tech Notes
- Added `getLeagueByCode` server fallback + normalized uppercase codes.
- Added `supabaseInvites` helpers (create/list/accept/decline/revoke) and integrated into `LeagueDetails` + `FriendsScreen`.
- Added `isUsernameAvailable`, `resendVerificationEmail`, and enhanced structured error logging.

## ðŸ“Œ Known / Next
- Push notifications for new invites are not yet implemented (planned).
- Android build with these features pending (if needed for testers).

Let us know if any league invite edge cases or code joins still failâ€”include the invite code and approximate time.
